
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Моя Книга Рецептов</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
        :root {
            --font-family: 'Roboto, sans-serif';
            --primary-color: #c026d3;
            --background-color: #f9fafb;
            --text-color: #1f2937;
            --card-background-color: #ffffff;
            --heading-color: #111827;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto, sans-serif', 'sans-serif'],
                    },
                    colors: {
                        primary: 'var(--primary-color)',
                        'bg-main': 'var(--background-color)',
                        'text': 'var(--text-color)',
                        'card-bg': 'var(--card-background-color)',
                        'heading': 'var(--heading-color)',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-bg-main font-sans text-text">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center my-8">
            <h1 class="text-5xl font-bold text-heading">Книга Рецептов</h1>
            <p class="text-text/80 mt-2">Лучшие блюда, собранные в одном месте</p>
        </header>
        
        <div class="sticky top-0 z-10 bg-bg-main/80 backdrop-blur-sm py-4 mb-8 rounded-lg">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end p-4 bg-card-bg shadow-md rounded-lg">
                <div>
                    <label for="searchInput" class="block text-sm font-medium text-heading">Поиск по названию</label>
                    <input type="text" id="searchInput" placeholder="Например, 'курица'" class="mt-1 block w-full bg-gray-100 text-gray-800 border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary">
                </div>
                 <div>
                    <label for="categoryFilter" class="block text-sm font-medium text-heading">Категория</label>
                    <select id="categoryFilter" class="mt-1 block w-full bg-gray-100 text-gray-800 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
                        <option value="all">Все категории</option>
                        <option value="Супы">Супы</option><option value="Десерты">Десерты</option><option value="Салаты">Салаты</option>
                    </select>
                </div>
                <div>
                  <label for="sortFilter" class="block text-sm font-medium text-heading">Сортировка</label>
                  <select id="sortFilter" class="mt-1 block w-full bg-gray-100 text-gray-800 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md">
                    <option value="default">По умолчанию</option>
                    <option value="title-asc">Название (А-Я)</option>
                    <option value="title-desc">Название (Я-А)</option>
                    <option value="time-asc">Время (сначала быстрые)</option>
                    <option value="time-desc">Время (сначала долгие)</option>
                    <option value="cal-asc">Калории (сначала легкие)</option>
                    <option value="cal-desc">Калории (сначала сытные)</option>
                  </select>
                </div>
                <div>
                    <label for="caloriesFilter" class="block text-sm font-medium text-heading">Калории до: <span id="caloriesValue" class="font-bold text-primary"></span></label>
                    <input type="range" id="caloriesFilter" min="0" step="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                </div>
            </div>
        </div>

        <main>
            <div id="recipe-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Recipes will be injected here -->
            </div>
        </main>
    </div>
    <script>
        window.recipesData = [{"id":"1","title":"Классический Борщ","category":"Супы","imageUrl":"https://picsum.photos/seed/borsch/600/400","description":"Традиционный украинский борщ с говядиной и свеклой. Насыщенный и ароматный суп, который согреет в любую погоду.","ingredients":[{"id":"i1-1","name":"Говядина на кости","amount":"500 г"},{"id":"i1-2","name":"Свекла","amount":"2 шт"},{"id":"i1-3","name":"Капуста","amount":"300 г"},{"id":"i1-4","name":"Картофель","amount":"4 шт"},{"id":"i1-5","name":"Морковь","amount":"1 шт"},{"id":"i1-6","name":"Лук","amount":"1 шт"},{"id":"i1-7","name":"Томатная паста","amount":"2 ст. л."},{"id":"i1-8","name":"Сметана для подачи","amount":"по вкусу"}],"instructions":["Сварите мясной бульон.","Нарежьте овощи: {{Капуста}} соломкой, {{Картофель}} кубиками.","Сделайте зажарку из {{Лук}}, {{Морковь}} и {{Свекла}} с {{Томатная паста}}.","Добавьте в бульон {{Картофель}} и {{Капуста}}.","Через 15 минут добавьте зажарку и варите до готовности.","Подавайте со {{Сметана для подачи}} и свежей зеленью."],"calories":250,"cookTime":120},{"id":"2","title":"Тирамису","category":"Десерты","imageUrl":"https://picsum.photos/seed/tiramisu/600/400","description":"Знаменитый итальянский десерт с сыром маскарпоне, кофе и печеньем савоярди. Нежный, воздушный и незабываемый вкус.","ingredients":[{"id":"i2-1","name":"Сыр маскарпоне","amount":"500 г"},{"id":"i2-2","name":"Яйца","amount":"4 шт"},{"id":"i2-3","name":"Сахар","amount":"100 г"},{"id":"i2-4","name":"Печенье савоярди","amount":"200 г"},{"id":"i2-5","name":"Крепкий кофе","amount":"300 мл"},{"id":"i2-6","name":"Какао-порошок","amount":"2 ст. л."}],"instructions":["Отделите желтки от белков. Взбейте желтки с {{Сахар}} добела.","Добавьте {{Сыр маскарпоне}} и аккуратно перемешайте.","Взбейте белки в крепкую пену и введите в крем.","Быстро окунайте {{Печенье савоярди}} в холодный {{Крепкий кофе}} и выкладывайте слоем в форму.","Сверху выложите половину крема.","Повторите слои. Поставьте в холодильник на 4-6 часов.","Перед подачей посыпьте {{Какао-порошок}}."],"calories":450,"cookTime":30},{"title":"Греческий салат","category":"Салаты","imageUrl":"https://picsum.photos/seed/1761501049077/600/400","description":"Свежий и легкий салат с овощами и сыром фета. Идеальное блюдо для летнего дня.","ingredients":[{"id":"5fb649c4-79bf-4fc7-8d07-39845d1b1a05","name":"Помидоры","amount":"2 шт"},{"id":"b59a1c7d-156d-449b-985c-005712a44359","name":"Огурцы","amount":"1 шт"},{"id":"f7c176e1-b9f6-4660-938b-0073181d2684","name":"","amount":""}],"instructions":[""],"calories":180,"cookTime":15,"id":"c059f945-5ea2-412b-98ca-1689faaba252"}];
        const scriptToRun = () => {
    const recipesData = window.recipesData;
    let ratings = JSON.parse(localStorage.getItem("recipeRatings") || "{}");
    const saveRatings = () => {
      localStorage.setItem("recipeRatings", JSON.stringify(ratings));
    };
    const renderSingleRecipe = () => {
      document.body.innerHTML = "";
      const recipeId = window.location.hash.substring(1);
      const recipe = recipesData.find((r) => r.id === recipeId);
      if (recipe) {
        const singleViewHtml = `
                    <div class="container mx-auto p-4 sm:p-6 lg:p-12">
                      <div class="max-w-4xl mx-auto">
                        <a href="${window.location.pathname}" class="inline-block mb-8 text-sm text-primary hover:underline">&larr; Назад ко всем рецептам</a>
                        <div class="bg-card-bg rounded-2xl shadow-xl overflow-hidden">
                            <img src="${recipe.imageUrl}" alt="${recipe.title}" class="w-full h-64 md:h-96 object-cover">
                            <div class="p-6 sm:p-8 md:p-10">
                                <span class="text-sm font-semibold text-primary uppercase">${recipe.category}</span>
                                <h1 class="text-4xl md:text-5xl font-bold text-heading mt-2">${recipe.title}</h1>
                                <p class="text-text mt-4 text-lg">${recipe.description}</p>
                                <div class="mt-6 text-base text-text/80 flex flex-col sm:flex-row gap-4 sm:gap-8 border-y border-gray-200 py-4">
                                    <span><strong class="text-heading">Время приготовления:</strong> ${recipe.cookTime} мин</span>
                                    <span><strong class="text-heading">Калорийность:</strong> ${recipe.calories} ккал</span>
                                </div>
                                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <h2 class="text-2xl font-semibold text-heading mb-4">Ингредиенты:</h2>
                                        <ul class="list-disc list-inside text-text space-y-2">
                                            ${recipe.ingredients.map((ing) => `<li><strong>${ing.name}</strong> - ${ing.amount}</li>`).join("")}
                                        </ul>
                                    </div>
                                    <div>
                                        <h2 class="text-2xl font-semibold text-heading mb-4">Инструкции:</h2>
                                        <ol class="list-decimal list-inside text-text space-y-4">
                                             ${recipe.instructions.map((step) => `<li>${step}</li>`).join("")}
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                    </div>
                `;
        document.body.insertAdjacentHTML("beforeend", singleViewHtml);
      } else {
        document.body.innerHTML = '<div class="text-center p-20"><h1 class="text-2xl font-bold text-heading">Рецепт не найден</h1><a href="/" class="mt-4 inline-block text-primary hover:underline">Вернуться на главную</a></div>';
      }
    };
    const initGridView = () => {
      const recipeGrid = document.getElementById("recipe-grid");
      const searchInput = document.getElementById("searchInput");
      const caloriesFilter = document.getElementById("caloriesFilter");
      const caloriesValue = document.getElementById("caloriesValue");
      const categoryFilter = document.getElementById("categoryFilter");
      const sortFilter = document.getElementById("sortFilter");
      const renderRecipes = (recipesToRender) => {
        if (!recipeGrid) return;
        recipeGrid.innerHTML = recipesToRender.length > 0 ? recipesToRender.map((recipe) => {
          const rating = ratings[recipe.id] || 0;
          const stars = Array(5).fill(0).map((_, i) => `
                        <svg data-value="${i + 1}" class="w-6 h-6 cursor-pointer ${i < rating ? "text-amber-400" : "text-gray-300"}" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                    `).join("");
          const keyIngredients = recipe.ingredients.slice(0, 4);
          return `
                    <a href="#${recipe.id}" target="_blank" class="recipe-card block bg-card-bg rounded-lg shadow-lg overflow-hidden flex flex-col">
                        <img src="${recipe.imageUrl}" alt="${recipe.title}" class="w-full h-56 object-cover">
                        <div class="p-6 flex-grow flex flex-col">
                            <span class="text-sm font-semibold text-primary uppercase">${recipe.category}</span>
                            <h3 class="text-2xl font-bold text-heading mt-2">${recipe.title}</h3>
                            <p class="text-text mt-2 text-base flex-grow">${recipe.description}</p>
                            <div class="mt-4 text-sm text-text/80 flex justify-between">
                                <span><strong class="text-heading">Время:</strong> ${recipe.cookTime} мин</span>
                                <span><strong class="text-heading">Калории:</strong> ${recipe.calories} ккал</span>
                            </div>
                            
                            <div class="mt-4 border-t border-gray-200 pt-4">
                                <h4 class="text-sm font-semibold text-heading mb-2">Ключевые ингредиенты:</h4>
                                <ul class="list-disc list-inside text-text space-y-1 text-xs">
                                     ${keyIngredients.map((ing) => `<li>${ing.name}</li>`).join("")}
                                     ${recipe.ingredients.length > 4 ? `<li class="text-text/70">...и другие</li>` : ""}
                                </ul>
                            </div>

                            <div class="mt-auto pt-4 flex items-center justify-center gap-1" data-recipe-id="${recipe.id}">
                               ${stars}
                            </div>
                        </div>
                    </a>
                `;
        }).join("") : '<p class="text-center text-text col-span-full py-12">По вашему запросу рецептов не найдено.</p>';
      };
      const applyFiltersAndSort = () => {
        const searchTerm = searchInput.value.toLowerCase();
        const maxCalories = parseInt(caloriesFilter.value, 10);
        const selectedCategory = categoryFilter.value;
        const sortOption = sortFilter.value;
        let filtered = recipesData.filter((recipe) => {
          const matchesSearch = searchTerm === "" || recipe.title.toLowerCase().includes(searchTerm) || recipe.description.toLowerCase().includes(searchTerm);
          const matchesCalories = recipe.calories <= maxCalories;
          const matchesCategory = selectedCategory === "all" || recipe.category === selectedCategory;
          return matchesSearch && matchesCalories && matchesCategory;
        });
        switch (sortOption) {
          case "time-asc":
            filtered.sort((a, b) => a.cookTime - b.cookTime);
            break;
          case "time-desc":
            filtered.sort((a, b) => b.cookTime - a.cookTime);
            break;
          case "cal-asc":
            filtered.sort((a, b) => a.calories - b.calories);
            break;
          case "cal-desc":
            filtered.sort((a, b) => b.calories - b.calories);
            break;
          case "title-asc":
            filtered.sort((a, b) => a.title.localeCompare(b.title));
            break;
          case "title-desc":
            filtered.sort((a, b) => b.title.localeCompare(a.title));
            break;
        }
        renderRecipes(filtered);
      };
      const getMaxCalories = () => recipesData.length > 0 ? Math.max(...recipesData.map((r) => r.calories)) : 1e3;
      if (searchInput) searchInput.addEventListener("input", applyFiltersAndSort);
      if (categoryFilter) categoryFilter.addEventListener("change", applyFiltersAndSort);
      if (sortFilter) sortFilter.addEventListener("change", applyFiltersAndSort);
      if (caloriesFilter && caloriesValue) {
        const maxCal = getMaxCalories();
        caloriesFilter.max = String(maxCal);
        caloriesFilter.value = String(maxCal);
        caloriesValue.textContent = String(maxCal);
        caloriesFilter.addEventListener("input", () => {
          caloriesValue.textContent = caloriesFilter.value;
          applyFiltersAndSort();
        });
      }
      if (recipeGrid) {
        recipeGrid.addEventListener("click", (e) => {
          const target = e.target;
          const star = target.closest("svg[data-value]");
          if (star) {
            e.preventDefault();
            const rating = star.getAttribute("data-value");
            const recipeId = star.closest("[data-recipe-id]").dataset.recipeId;
            if (rating && recipeId) {
              ratings[recipeId] = parseInt(rating, 10);
              saveRatings();
              applyFiltersAndSort();
            }
          }
        });
      }
      applyFiltersAndSort();
    };
    if (window.location.hash) {
      renderSingleRecipe();
    } else {
      initGridView();
    }
  };
        document.addEventListener('DOMContentLoaded', scriptToRun);
    </script>
</body>
</html>
